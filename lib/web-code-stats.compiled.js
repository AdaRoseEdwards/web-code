'use strict';


	/* eslint-disable */
	var isServer = true;
	

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var path = require('path');
var mime = _interopDefault(require('mime'));
var PouchDB = _interopDefault(require('pouchdb-browser'));

/* global Promise, isServer */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

var db = isServer ? null : new PouchDB('web-code', {});
function updateDBDoc(_id, obj) {

	updateDBDoc.promise = updateDBDoc.promise || Promise.resolve();

	/* update last open folder in db */
	return updateDBDoc.promise = updateDBDoc.promise
		.then(function () {
			return db.get(_id)
		})
		.catch(function (e) {
			if (e.status === 404) {
				return { _id: _id }
			}
			throw e;
		})
		.then(function (doc) {
			Object.keys(obj).forEach(function (key) {
				doc[key] = obj[key];
			});
			db.put(doc);
		});
}

/* Like web-code-stats but for storing the file inside and not as a seperate file */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

var idToBufferFileMap = new Map();

var compulsaryAttrs = [
	'name',
	'id',
	'icon'
];

var optionalAttrs = [
	'mime'
];

var keys$1 = compulsaryAttrs.concat(optionalAttrs);

function BufferFile(data) {

	this.data = {};

	compulsaryAttrs.forEach(function (key) {
		if (data[key]) {
			this.data[key] = data[key];
		} else {
			throw Error('Missing Key: ' + key);
		}
	}.bind(this));

	if (idToBufferFileMap.has(data.id)) {
		return idToBufferFileMap.get(data.id);
	}
	idToBufferFileMap.set(data.id, this);

	optionalAttrs.forEach(function (key) {
		if (data[key]) {
			this.data[key] = data[key];
		}
	}.bind(this));

	//  Try fetching from DB
	this.valuePromise = db.get(data.id)
	.catch(function (e) {
		if (e.status === 404) {
			var doc = this.toDoc();
			doc._id = this.data.id;
			doc.value = '';
			return db.put(doc).then(function () {
				return doc;	
			});
		}
		throw e;
	}.bind(this))
	.then(function (doc) {
		this.value = doc.value;
		return doc.value;
	}.bind(this));
}

BufferFile.prototype.update = function update(value) {
	// save doc to disk
	return this.valuePromise = this.valuePromise
	.then(function () {
		return updateDBDoc(this.data.id, {
			value: value
		});
	}.bind(this))
	.then(function () {
		return value;
	});
};

BufferFile.prototype.toDoc = function toDoc() {
	var out = {
		isBufferFileDoc: true
	};
	keys$1.forEach(function (key) {
		out[key] = this.data[key];
	}.bind(this));
	return out;
};

/* global Map, Set, Promise */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

function renderFileList(el, array, options) {

	options = options || {};
	var useOptions = {
		hideDotFiles: (options.hideDotFiles !== undefined ? options.hideDotFiles : true),
		nested: (options.nested !== undefined ? options.nested : true),
		nestingLimit: (options.nestingLimit || 5) - 1,
		sort: options.sort === false ? false : true
	};
	if (options.nestingLimit === 0) return;

	var sortedData = !useOptions.sort ? array : Array.from(array)
		.filter(function (stats) {

			// Whether to hide dotfiles
			if (stats.data.name !== '..' && useOptions.hideDotFiles !== false) {
				return stats.data.name[0] !== '.';
			}
			return true;
		})
		.sort(function (a, b) {
			if (a.name === '..') {
				return -1;
			}
			if (b.name === '..') {
				return 1;
			}
			if (
				(a.isDirectory() === b.isDirectory()) &&
				(a.isFile() === b.isFile())
			) {
				return ([a.data.name, b.data.name].sort(function (a, b) {
					return a.toLowerCase().localeCompare(b.toLowerCase());
				})[0] === a.data.name ? -1 : 1);
			} else {
				if (a.isDirectory()) return -1;
				return 1;
			}
		});

	sortedData.map(function (stats) {

		var li = document.createElement('li');
		li.classList.add('has-icon');
		li.tabIndex = 0;
		li.tabKey = stats;

		if (stats.constructor === Stats) {
			li.dataset.mime = stats.data.mime;
			li.dataset.name = stats.data.name;
			li.dataset.size = stats.data.size;
			li.textContent = stats.data.name;
			li.stats = stats;

			if (stats.isDirectory() && useOptions.nested !== false) {
				var newFileList = document.createElement('ul');
				newFileList.classList.add('filelist');
				li.appendChild(newFileList);
				if (stats.expanded && stats.children) {
					stats.renderFileList(newFileList, useOptions);
				}
			}
		} else if (stats.constructor === BufferFile) {
			li.dataset.name = stats.data.name;
			li.textContent = stats.data.name;
			if (stats.data.icon) {
				li.classList.add('has-icon');
				li.dataset.icon = stats.icon;
			}
			if (stats.data.mime) {
				li.dataset.mime = stats.mime;
			}
		}

		el.appendChild(li);
	});


}

/* global Map, Set, Promise, isServer */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

var promises = new Map();
function remoteCmd(cmd, data) {
	var id = performance.now() + '_' + Math.random();
	return wsPromise.then(function (ws) {
		ws.send(JSON.stringify([
			cmd,
			id,
			data
		]));
		
		if (process.env.DEBUG) {
			var err = new Error();
			var stack = err.stack;
		}

		return new Promise(function (resolve$$1) {
			promises.set(id, resolve$$1);
		}).then(function (data) {
			if (data.error) {
				if (process.env.DEBUG) {
					console.error(data.error, stack);
				}
				throw Error(data.error);
			}
			return data.result;
		});
	});
}

function updateEnv(name) {
	return remoteCmd('GET_ENV', name)
	.then(function (result) {
		if (result) process.env[name] = result;
		return result;
	});
}

var wsPromise = getNewWS();

// Connection opened
function getNewWS() {
	return new Promise(function (resolve$$1) {

		if (isServer) resolve$$1();

		var interval = -1;

		var isLocal = location.hostname === 'localhost' || location.hostname === '127.0.0.1';
		var ws = new WebSocket((isLocal ? 'ws://' : 'wss://') + location.host);
		ws.binaryType = 'arraybuffer';

		var isAlive = true;

		ws.addEventListener('message', function m(e) {
			if (typeof e.data === 'string') {
				if (e.data === '__pong__') {
					isAlive = true;
					return;
				}
				var result = JSON.parse(e.data);
				var cmd = result[0];
				var promiseResolver = promises.get(result[1]);
				var data = result[2];
				if (promiseResolver) {
					promises.delete(result[1]);
					return promiseResolver(data);
				}
				if (cmd === 'HANDSHAKE') {
					resolve$$1(
						Promise.all([
							updateEnv('HOME'),
							updateEnv('DEBUG'),
						])
						.then(Promise.resolve(ws))
					);
				}
				if (cmd === 'FS_CHANGE') {
					console.log('CHANGE', data);
				}
				if (cmd === 'FS_ADD') {
					Stats.fromPath(path.dirname(data.path)).then(function (stats) {
						stats.updateChildren();
					});
					console.log('ADD', data);
				}
				if (cmd === 'FS_UNLINK') {
					Stats.fromPath(path.dirname(data.path)).then(function (stats) {
						stats.updateChildren();
					});
					console.log('UNLINK', data);
				}
			}
		});

		ws.addEventListener('open', function firstOpen() {

			interval = setInterval(function ping() {
				if (isAlive === false) {
					terminate();
				}
				isAlive = false;
				ws.send('__ping__');
			}, 3000);

			ws.removeEventListener('open', firstOpen);
			resolve$$1(ws);
		});

		function terminate() {
			clearInterval(interval);
			wsPromise = new Promise(function (resolve$$1) {
				setTimeout(function () {
					console.log('Trying to get new connection');
					getNewWS().then(function (newWs) {
						resolve$$1(newWs);
					});
				}, 1000);
			});
		}
	});
}

/* global Map, Set, Promise, fs, isServer */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

// Map to prevent duplicate data objects for each file
var pathToDataMap = new Map();

var fsFromFn = ['isFile', 'isDirectory', 'isBlockDevice', 'isCharacterDevice', 'isSymbolicLink', 'isFIFO', 'isSocket'];
var fsStatic = [
	'dev',
	'mode',
	'nlink',
	'uid',
	'gid',
	'rdev',
	'blksize',
	'ino',
	'size',
	'blocks',
	'atime',
	'mtime',
	'ctime',
	'birthtime',
	'path'
];
var keys = fsStatic.concat(fsFromFn);


/**
 * Special type of singleton which returns the same object for each path.
 */
function Stats (data) {
	if (pathToDataMap.has(data.path)) {
		var existing = pathToDataMap.get(data.path);
		existing.update(data);
		return existing;
	}
	this.fileLists = new Set();
	this.data = {};
	this.update(data);
	pathToDataMap.set(data.path, this);
}

Stats.prototype.update = function update(data) {

	var self = this;

	this.data.name = path.basename(data.path);
	this.data.dirName = path.dirname(data.path);
	this.data.extension = path.extname(data.path).toLowerCase();
	this.data.mime = data.isFile ? mime.lookup(data.path) : 'directory';

	keys.forEach(function (key) {
		this.data[key] = data[key];
	}.bind(this));

	if (this.isDirectory() && !this.children) {
		this.children = [];
		this.childrenPopulated = false;
	}

    // Rerender file lists
	if (this.fileLists.size) {
		Array.from(this.fileLists).forEach(function (filelistEl) {
			filelistEl.innerHTML = '';
			self.renderFileList(filelistEl, filelistEl.filelistOptions);
		});
	}
};

Stats.prototype.toDoc = function toDoc() {
	var out = {
		__webStatDoc: true
	};
	keys.forEach(function (key) {
		out[key] = this.data[key];
	}.bind(this));
	return out;
};

Stats.prototype.updateChildren = function () {
	if(!this.isDirectory()) throw Error('Not a directory');

	var self = this;
	return fs.readdir(self.data.path)
	.then(function (arr) {
		return Promise.all(arr.map(function (child) {
			return Stats.fromPath(path.join(self.data.path, child));
		}));
	})
	.then(function (statsArray) {
		self.children.splice(0);
		self.children.push.apply(self.children, statsArray);

		// Let server know	
		if (!isServer) remoteCmd('CLIENT', {
			cmd: 'watchPath',
			arguments: [self.data.path]
		});

		self.update(self.data);

		return self;  
	});
};

Stats.prototype.destroyFileList = function (el) {
	el.stats = undefined;
	this.fileLists.delete(el);
	el.innerHTML = '';
};

Stats.prototype.renderFileList = function (el, options) {

	el.filelistOptions = options;

	el.stats = this;
	this.fileLists.add(el);
	el.dataset.mime = this.data.mime;
	el.dataset.name = this.data.name;
	el.dataset.size = this.data.size;

	renderFileList(el, this.children, options);
};

// add isFile isDirectory etc
fsFromFn.forEach(function (key) {
	Stats.prototype[key] = new Function('return this.data["' + key + '"];');
});

Stats.fromPath = function (path$$1) {
	return fs.stat(path$$1);
};

Stats.fromDoc = function (data) {
	return new Stats(data);
};

Stats.fromNodeStats = function (path$$1, nodeStat) {

	var out = {};

	fsFromFn.forEach(key => out[key] = nodeStat[key]());
	keys.forEach(key => {
		if (typeof nodeStat[key] !== 'function' && typeof nodeStat[key] !== 'object') {
			out[key] = nodeStat[key];
		}
	});

	out.path = path.resolve(path$$1);

	return new Stats(out);
};

module.exports = Stats;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLWNvZGUtc3RhdHMuY29tcGlsZWQuanMiLCJzb3VyY2VzIjpbIi4uL3N0YXRpYy9zY3JpcHRzL2xpYi9kYi5qcyIsIi4uL3N0YXRpYy9zY3JpcHRzL2xpYi9idWZmZXItZmlsZS5qcyIsIi4uL3N0YXRpYy9zY3JpcHRzL2xpYi9yZW5kZXItZmlsZS1saXN0LmpzIiwiLi4vc3RhdGljL3NjcmlwdHMvbGliL3dzLmpzIiwiLi4vc3RhdGljL3NjcmlwdHMvbGliL3dlYi1jb2RlLXN0YXRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBQcm9taXNlLCBpc1NlcnZlciAqL1xuLyogZXNsaW50IG5vLXZhcjogMCwgbm8tY29uc29sZTogMCAqL1xuLyogZXNsaW50LWVudiBlczYgKi9cblxuaW1wb3J0IFBvdWNoREIgZnJvbSAncG91Y2hkYi1icm93c2VyJztcbnZhciBkYiA9IGlzU2VydmVyID8gbnVsbCA6IG5ldyBQb3VjaERCKCd3ZWItY29kZScsIHt9KTtcbmZ1bmN0aW9uIHVwZGF0ZURCRG9jKF9pZCwgb2JqKSB7XG5cblx0dXBkYXRlREJEb2MucHJvbWlzZSA9IHVwZGF0ZURCRG9jLnByb21pc2UgfHwgUHJvbWlzZS5yZXNvbHZlKCk7XG5cblx0LyogdXBkYXRlIGxhc3Qgb3BlbiBmb2xkZXIgaW4gZGIgKi9cblx0cmV0dXJuIHVwZGF0ZURCRG9jLnByb21pc2UgPSB1cGRhdGVEQkRvYy5wcm9taXNlXG5cdFx0LnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGRiLmdldChfaWQpXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24gKGUpIHtcblx0XHRcdGlmIChlLnN0YXR1cyA9PT0gNDA0KSB7XG5cdFx0XHRcdHJldHVybiB7IF9pZDogX2lkIH1cblx0XHRcdH1cblx0XHRcdHRocm93IGU7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbiAoZG9jKSB7XG5cdFx0XHRPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRkb2Nba2V5XSA9IG9ialtrZXldO1xuXHRcdFx0fSk7XG5cdFx0XHRkYi5wdXQoZG9jKTtcblx0XHR9KTtcbn1cblxuZXhwb3J0IHsgZGIsIHVwZGF0ZURCRG9jIH07IiwiLyogTGlrZSB3ZWItY29kZS1zdGF0cyBidXQgZm9yIHN0b3JpbmcgdGhlIGZpbGUgaW5zaWRlIGFuZCBub3QgYXMgYSBzZXBlcmF0ZSBmaWxlICovXG4vKiBlc2xpbnQgbm8tdmFyOiAwLCBuby1jb25zb2xlOiAwICovXG4vKiBlc2xpbnQtZW52IGVzNiAqL1xuXG5pbXBvcnQge3VwZGF0ZURCRG9jLCBkYn0gZnJvbSAnLi9kYi5qcyc7XG5cbnZhciBpZFRvQnVmZmVyRmlsZU1hcCA9IG5ldyBNYXAoKTtcblxudmFyIGNvbXB1bHNhcnlBdHRycyA9IFtcblx0J25hbWUnLFxuXHQnaWQnLFxuXHQnaWNvbidcbl07XG5cbnZhciBvcHRpb25hbEF0dHJzID0gW1xuXHQnbWltZSdcbl1cblxudmFyIGtleXMgPSBjb21wdWxzYXJ5QXR0cnMuY29uY2F0KG9wdGlvbmFsQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCdWZmZXJGaWxlKGRhdGEpIHtcblxuXHR0aGlzLmRhdGEgPSB7fTtcblxuXHRjb21wdWxzYXJ5QXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0aWYgKGRhdGFba2V5XSkge1xuXHRcdFx0dGhpcy5kYXRhW2tleV0gPSBkYXRhW2tleV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEVycm9yKCdNaXNzaW5nIEtleTogJyArIGtleSk7XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xuXG5cdGlmIChpZFRvQnVmZmVyRmlsZU1hcC5oYXMoZGF0YS5pZCkpIHtcblx0XHRyZXR1cm4gaWRUb0J1ZmZlckZpbGVNYXAuZ2V0KGRhdGEuaWQpO1xuXHR9XG5cdGlkVG9CdWZmZXJGaWxlTWFwLnNldChkYXRhLmlkLCB0aGlzKVxuXG5cdG9wdGlvbmFsQXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0aWYgKGRhdGFba2V5XSkge1xuXHRcdFx0dGhpcy5kYXRhW2tleV0gPSBkYXRhW2tleV07XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xuXG5cdC8vICBUcnkgZmV0Y2hpbmcgZnJvbSBEQlxuXHR0aGlzLnZhbHVlUHJvbWlzZSA9IGRiLmdldChkYXRhLmlkKVxuXHQuY2F0Y2goZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAoZS5zdGF0dXMgPT09IDQwNCkge1xuXHRcdFx0dmFyIGRvYyA9IHRoaXMudG9Eb2MoKTtcblx0XHRcdGRvYy5faWQgPSB0aGlzLmRhdGEuaWQ7XG5cdFx0XHRkb2MudmFsdWUgPSAnJztcblx0XHRcdHJldHVybiBkYi5wdXQoZG9jKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGRvYztcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRocm93IGU7XG5cdH0uYmluZCh0aGlzKSlcblx0LnRoZW4oZnVuY3Rpb24gKGRvYykge1xuXHRcdHRoaXMudmFsdWUgPSBkb2MudmFsdWU7XG5cdFx0cmV0dXJuIGRvYy52YWx1ZTtcblx0fS5iaW5kKHRoaXMpKTtcbn1cblxuQnVmZmVyRmlsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdC8vIHNhdmUgZG9jIHRvIGRpc2tcblx0cmV0dXJuIHRoaXMudmFsdWVQcm9taXNlID0gdGhpcy52YWx1ZVByb21pc2Vcblx0LnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB1cGRhdGVEQkRvYyh0aGlzLmRhdGEuaWQsIHtcblx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdH0pO1xuXHR9LmJpbmQodGhpcykpXG5cdC50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0pO1xufVxuXG5CdWZmZXJGaWxlLnByb3RvdHlwZS50b0RvYyA9IGZ1bmN0aW9uIHRvRG9jKCkge1xuXHR2YXIgb3V0ID0ge1xuXHRcdGlzQnVmZmVyRmlsZURvYzogdHJ1ZVxuXHR9O1xuXHRrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdG91dFtrZXldID0gdGhpcy5kYXRhW2tleV07XG5cdH0uYmluZCh0aGlzKSk7XG5cdHJldHVybiBvdXQ7XG59IiwiLyogZ2xvYmFsIE1hcCwgU2V0LCBQcm9taXNlICovXG4vKiBlc2xpbnQgbm8tdmFyOiAwLCBuby1jb25zb2xlOiAwICovXG4vKiBlc2xpbnQtZW52IGVzNiAqL1xuXG5pbXBvcnQgU3RhdHMgZnJvbSAnLi93ZWItY29kZS1zdGF0cy5qcyc7XG5pbXBvcnQgQnVmZmVyRmlsZSBmcm9tICcuL2J1ZmZlci1maWxlLmpzJztcblxuZnVuY3Rpb24gcmVuZGVyRmlsZUxpc3QoZWwsIGFycmF5LCBvcHRpb25zKSB7XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdHZhciB1c2VPcHRpb25zID0ge1xuXHRcdGhpZGVEb3RGaWxlczogKG9wdGlvbnMuaGlkZURvdEZpbGVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpZGVEb3RGaWxlcyA6IHRydWUpLFxuXHRcdG5lc3RlZDogKG9wdGlvbnMubmVzdGVkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lc3RlZCA6IHRydWUpLFxuXHRcdG5lc3RpbmdMaW1pdDogKG9wdGlvbnMubmVzdGluZ0xpbWl0IHx8IDUpIC0gMSxcblx0XHRzb3J0OiBvcHRpb25zLnNvcnQgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlXG5cdH1cblx0aWYgKG9wdGlvbnMubmVzdGluZ0xpbWl0ID09PSAwKSByZXR1cm47XG5cblx0dmFyIHNvcnRlZERhdGEgPSAhdXNlT3B0aW9ucy5zb3J0ID8gYXJyYXkgOiBBcnJheS5mcm9tKGFycmF5KVxuXHRcdC5maWx0ZXIoZnVuY3Rpb24gKHN0YXRzKSB7XG5cblx0XHRcdC8vIFdoZXRoZXIgdG8gaGlkZSBkb3RmaWxlc1xuXHRcdFx0aWYgKHN0YXRzLmRhdGEubmFtZSAhPT0gJy4uJyAmJiB1c2VPcHRpb25zLmhpZGVEb3RGaWxlcyAhPT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuIHN0YXRzLmRhdGEubmFtZVswXSAhPT0gJy4nO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSlcblx0XHQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0aWYgKGEubmFtZSA9PT0gJy4uJykge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoYi5uYW1lID09PSAnLi4nKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXHRcdFx0aWYgKFxuXHRcdFx0XHQoYS5pc0RpcmVjdG9yeSgpID09PSBiLmlzRGlyZWN0b3J5KCkpICYmXG5cdFx0XHRcdChhLmlzRmlsZSgpID09PSBiLmlzRmlsZSgpKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybiAoW2EuZGF0YS5uYW1lLCBiLmRhdGEubmFtZV0uc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0XHRcdHJldHVybiBhLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZShiLnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0XHR9KVswXSA9PT0gYS5kYXRhLm5hbWUgPyAtMSA6IDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGEuaXNEaXJlY3RvcnkoKSkgcmV0dXJuIC0xO1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRzb3J0ZWREYXRhLm1hcChmdW5jdGlvbiAoc3RhdHMpIHtcblxuXHRcdHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cdFx0bGkuY2xhc3NMaXN0LmFkZCgnaGFzLWljb24nKTtcblx0XHRsaS50YWJJbmRleCA9IDA7XG5cdFx0bGkudGFiS2V5ID0gc3RhdHM7XG5cblx0XHRpZiAoc3RhdHMuY29uc3RydWN0b3IgPT09IFN0YXRzKSB7XG5cdFx0XHRsaS5kYXRhc2V0Lm1pbWUgPSBzdGF0cy5kYXRhLm1pbWU7XG5cdFx0XHRsaS5kYXRhc2V0Lm5hbWUgPSBzdGF0cy5kYXRhLm5hbWU7XG5cdFx0XHRsaS5kYXRhc2V0LnNpemUgPSBzdGF0cy5kYXRhLnNpemU7XG5cdFx0XHRsaS50ZXh0Q29udGVudCA9IHN0YXRzLmRhdGEubmFtZTtcblx0XHRcdGxpLnN0YXRzID0gc3RhdHM7XG5cblx0XHRcdGlmIChzdGF0cy5pc0RpcmVjdG9yeSgpICYmIHVzZU9wdGlvbnMubmVzdGVkICE9PSBmYWxzZSkge1xuXHRcdFx0XHR2YXIgbmV3RmlsZUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXHRcdFx0XHRuZXdGaWxlTGlzdC5jbGFzc0xpc3QuYWRkKCdmaWxlbGlzdCcpO1xuXHRcdFx0XHRsaS5hcHBlbmRDaGlsZChuZXdGaWxlTGlzdCk7XG5cdFx0XHRcdGlmIChzdGF0cy5leHBhbmRlZCAmJiBzdGF0cy5jaGlsZHJlbikge1xuXHRcdFx0XHRcdHN0YXRzLnJlbmRlckZpbGVMaXN0KG5ld0ZpbGVMaXN0LCB1c2VPcHRpb25zKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoc3RhdHMuY29uc3RydWN0b3IgPT09IEJ1ZmZlckZpbGUpIHtcblx0XHRcdGxpLmRhdGFzZXQubmFtZSA9IHN0YXRzLmRhdGEubmFtZTtcblx0XHRcdGxpLnRleHRDb250ZW50ID0gc3RhdHMuZGF0YS5uYW1lO1xuXHRcdFx0aWYgKHN0YXRzLmRhdGEuaWNvbikge1xuXHRcdFx0XHRsaS5jbGFzc0xpc3QuYWRkKCdoYXMtaWNvbicpO1xuXHRcdFx0XHRsaS5kYXRhc2V0Lmljb24gPSBzdGF0cy5pY29uO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN0YXRzLmRhdGEubWltZSkge1xuXHRcdFx0XHRsaS5kYXRhc2V0Lm1pbWUgPSBzdGF0cy5taW1lO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGVsLmFwcGVuZENoaWxkKGxpKTtcblx0fSk7XG5cblxufVxuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJGaWxlTGlzdDsiLCIvKiBnbG9iYWwgTWFwLCBTZXQsIFByb21pc2UsIGlzU2VydmVyICovXG4vKiBlc2xpbnQgbm8tdmFyOiAwLCBuby1jb25zb2xlOiAwICovXG4vKiBlc2xpbnQtZW52IGVzNiAqL1xuXG52YXIgcHJvbWlzZXMgPSBuZXcgTWFwKCk7XG5pbXBvcnQgU3RhdHMgZnJvbSAnLi93ZWItY29kZS1zdGF0cy5qcyc7XG5pbXBvcnQgeyBkaXJuYW1lIH0gZnJvbSAncGF0aCc7XG5cbmZ1bmN0aW9uIHJlbW90ZUNtZChjbWQsIGRhdGEpIHtcblx0dmFyIGlkID0gcGVyZm9ybWFuY2Uubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpO1xuXHRyZXR1cm4gd3NQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHdzKSB7XG5cdFx0d3Muc2VuZChKU09OLnN0cmluZ2lmeShbXG5cdFx0XHRjbWQsXG5cdFx0XHRpZCxcblx0XHRcdGRhdGFcblx0XHRdKSk7XG5cdFx0XG5cdFx0aWYgKHByb2Nlc3MuZW52LkRFQlVHKSB7XG5cdFx0XHR2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cdFx0XHR2YXIgc3RhY2sgPSBlcnIuc3RhY2s7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0XHRwcm9taXNlcy5zZXQoaWQsIHJlc29sdmUpO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdGlmIChkYXRhLmVycm9yKSB7XG5cdFx0XHRcdGlmIChwcm9jZXNzLmVudi5ERUJVRykge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZGF0YS5lcnJvciwgc3RhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IEVycm9yKGRhdGEuZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRhdGEucmVzdWx0O1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRW52KG5hbWUpIHtcblx0cmV0dXJuIHJlbW90ZUNtZCgnR0VUX0VOVicsIG5hbWUpXG5cdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRpZiAocmVzdWx0KSBwcm9jZXNzLmVudltuYW1lXSA9IHJlc3VsdDtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9KTtcbn1cblxudmFyIHdzUHJvbWlzZSA9IGdldE5ld1dTKCk7XG5cbi8vIENvbm5lY3Rpb24gb3BlbmVkXG5mdW5jdGlvbiBnZXROZXdXUygpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cblx0XHRpZiAoaXNTZXJ2ZXIpIHJlc29sdmUoKTtcblxuXHRcdHZhciBpbnRlcnZhbCA9IC0xO1xuXG5cdFx0dmFyIGlzTG9jYWwgPSBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHwgbG9jYXRpb24uaG9zdG5hbWUgPT09ICcxMjcuMC4wLjEnO1xuXHRcdHZhciB3cyA9IG5ldyBXZWJTb2NrZXQoKGlzTG9jYWwgPyAnd3M6Ly8nIDogJ3dzczovLycpICsgbG9jYXRpb24uaG9zdCk7XG5cdFx0d3MuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cblx0XHR2YXIgaXNBbGl2ZSA9IHRydWU7XG5cblx0XHR3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gbShlKSB7XG5cdFx0XHRpZiAodHlwZW9mIGUuZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0aWYgKGUuZGF0YSA9PT0gJ19fcG9uZ19fJykge1xuXHRcdFx0XHRcdGlzQWxpdmUgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXHRcdFx0XHR2YXIgY21kID0gcmVzdWx0WzBdO1xuXHRcdFx0XHR2YXIgcHJvbWlzZVJlc29sdmVyID0gcHJvbWlzZXMuZ2V0KHJlc3VsdFsxXSk7XG5cdFx0XHRcdHZhciBkYXRhID0gcmVzdWx0WzJdO1xuXHRcdFx0XHRpZiAocHJvbWlzZVJlc29sdmVyKSB7XG5cdFx0XHRcdFx0cHJvbWlzZXMuZGVsZXRlKHJlc3VsdFsxXSk7XG5cdFx0XHRcdFx0cmV0dXJuIHByb21pc2VSZXNvbHZlcihkYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY21kID09PSAnSEFORFNIQUtFJykge1xuXHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRQcm9taXNlLmFsbChbXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZUVudignSE9NRScpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVFbnYoJ0RFQlVHJyksXG5cdFx0XHRcdFx0XHRdKVxuXHRcdFx0XHRcdFx0LnRoZW4oUHJvbWlzZS5yZXNvbHZlKHdzKSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjbWQgPT09ICdGU19DSEFOR0UnKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ0NIQU5HRScsIGRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjbWQgPT09ICdGU19BREQnKSB7XG5cdFx0XHRcdFx0U3RhdHMuZnJvbVBhdGgoZGlybmFtZShkYXRhLnBhdGgpKS50aGVuKGZ1bmN0aW9uIChzdGF0cykge1xuXHRcdFx0XHRcdFx0c3RhdHMudXBkYXRlQ2hpbGRyZW4oKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnQUREJywgZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNtZCA9PT0gJ0ZTX1VOTElOSycpIHtcblx0XHRcdFx0XHRTdGF0cy5mcm9tUGF0aChkaXJuYW1lKGRhdGEucGF0aCkpLnRoZW4oZnVuY3Rpb24gKHN0YXRzKSB7XG5cdFx0XHRcdFx0XHRzdGF0cy51cGRhdGVDaGlsZHJlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdVTkxJTksnLCBkYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0d3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIGZ1bmN0aW9uIGZpcnN0T3BlbigpIHtcblxuXHRcdFx0aW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiBwaW5nKCkge1xuXHRcdFx0XHRpZiAoaXNBbGl2ZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHR0ZXJtaW5hdGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpc0FsaXZlID0gZmFsc2U7XG5cdFx0XHRcdHdzLnNlbmQoJ19fcGluZ19fJyk7XG5cdFx0XHR9LCAzMDAwKTtcblxuXHRcdFx0d3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3BlbicsIGZpcnN0T3Blbik7XG5cdFx0XHRyZXNvbHZlKHdzKTtcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIHRlcm1pbmF0ZSgpIHtcblx0XHRcdGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuXHRcdFx0d3NQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ1RyeWluZyB0byBnZXQgbmV3IGNvbm5lY3Rpb24nKTtcblx0XHRcdFx0XHRnZXROZXdXUygpLnRoZW4oZnVuY3Rpb24gKG5ld1dzKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKG5ld1dzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSwgMTAwMCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufVxuXG5leHBvcnQge1xuXHR3c1Byb21pc2UsXG5cdHJlbW90ZUNtZFxufTsiLCIvKiBnbG9iYWwgTWFwLCBTZXQsIFByb21pc2UsIGZzLCBpc1NlcnZlciAqL1xuLyogZXNsaW50IG5vLXZhcjogMCwgbm8tY29uc29sZTogMCAqL1xuLyogZXNsaW50LWVudiBlczYgKi9cblxuaW1wb3J0IHsgcmVzb2x2ZSBhcyBwYXRoUmVzb2x2ZSwgYmFzZW5hbWUsIGRpcm5hbWUsIGV4dG5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCBtaW1lIGZyb20gJ21pbWUnO1xuaW1wb3J0IHJlbmRlckZpbGVMaXN0IGZyb20gJy4vcmVuZGVyLWZpbGUtbGlzdC5qcyc7XG5pbXBvcnQgeyByZW1vdGVDbWQgfSBmcm9tICcuL3dzLmpzJztcblxuLy8gTWFwIHRvIHByZXZlbnQgZHVwbGljYXRlIGRhdGEgb2JqZWN0cyBmb3IgZWFjaCBmaWxlXG52YXIgcGF0aFRvRGF0YU1hcCA9IG5ldyBNYXAoKTtcblxudmFyIGZzRnJvbUZuID0gWydpc0ZpbGUnLCAnaXNEaXJlY3RvcnknLCAnaXNCbG9ja0RldmljZScsICdpc0NoYXJhY3RlckRldmljZScsICdpc1N5bWJvbGljTGluaycsICdpc0ZJRk8nLCAnaXNTb2NrZXQnXTtcbnZhciBmc1N0YXRpYyA9IFtcblx0J2RldicsXG5cdCdtb2RlJyxcblx0J25saW5rJyxcblx0J3VpZCcsXG5cdCdnaWQnLFxuXHQncmRldicsXG5cdCdibGtzaXplJyxcblx0J2lubycsXG5cdCdzaXplJyxcblx0J2Jsb2NrcycsXG5cdCdhdGltZScsXG5cdCdtdGltZScsXG5cdCdjdGltZScsXG5cdCdiaXJ0aHRpbWUnLFxuXHQncGF0aCdcbl07XG52YXIga2V5cyA9IGZzU3RhdGljLmNvbmNhdChmc0Zyb21Gbik7XG5cblxuLyoqXG4gKiBTcGVjaWFsIHR5cGUgb2Ygc2luZ2xldG9uIHdoaWNoIHJldHVybnMgdGhlIHNhbWUgb2JqZWN0IGZvciBlYWNoIHBhdGguXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN0YXRzIChkYXRhKSB7XG5cdGlmIChwYXRoVG9EYXRhTWFwLmhhcyhkYXRhLnBhdGgpKSB7XG5cdFx0dmFyIGV4aXN0aW5nID0gcGF0aFRvRGF0YU1hcC5nZXQoZGF0YS5wYXRoKTtcblx0XHRleGlzdGluZy51cGRhdGUoZGF0YSk7XG5cdFx0cmV0dXJuIGV4aXN0aW5nO1xuXHR9XG5cdHRoaXMuZmlsZUxpc3RzID0gbmV3IFNldCgpO1xuXHR0aGlzLmRhdGEgPSB7fTtcblx0dGhpcy51cGRhdGUoZGF0YSk7XG5cdHBhdGhUb0RhdGFNYXAuc2V0KGRhdGEucGF0aCwgdGhpcyk7XG59XG5cblN0YXRzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXG5cdHZhciBzZWxmID0gdGhpcztcblxuXHR0aGlzLmRhdGEubmFtZSA9IGJhc2VuYW1lKGRhdGEucGF0aCk7XG5cdHRoaXMuZGF0YS5kaXJOYW1lID0gZGlybmFtZShkYXRhLnBhdGgpO1xuXHR0aGlzLmRhdGEuZXh0ZW5zaW9uID0gZXh0bmFtZShkYXRhLnBhdGgpLnRvTG93ZXJDYXNlKCk7XG5cdHRoaXMuZGF0YS5taW1lID0gZGF0YS5pc0ZpbGUgPyBtaW1lLmxvb2t1cChkYXRhLnBhdGgpIDogJ2RpcmVjdG9yeSc7XG5cblx0a2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHR0aGlzLmRhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0fS5iaW5kKHRoaXMpKTtcblxuXHRpZiAodGhpcy5pc0RpcmVjdG9yeSgpICYmICF0aGlzLmNoaWxkcmVuKSB7XG5cdFx0dGhpcy5jaGlsZHJlbiA9IFtdO1xuXHRcdHRoaXMuY2hpbGRyZW5Qb3B1bGF0ZWQgPSBmYWxzZTtcblx0fVxuXG4gICAgLy8gUmVyZW5kZXIgZmlsZSBsaXN0c1xuXHRpZiAodGhpcy5maWxlTGlzdHMuc2l6ZSkge1xuXHRcdEFycmF5LmZyb20odGhpcy5maWxlTGlzdHMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVsaXN0RWwpIHtcblx0XHRcdGZpbGVsaXN0RWwuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHRzZWxmLnJlbmRlckZpbGVMaXN0KGZpbGVsaXN0RWwsIGZpbGVsaXN0RWwuZmlsZWxpc3RPcHRpb25zKTtcblx0XHR9KTtcblx0fVxufVxuXG5TdGF0cy5wcm90b3R5cGUudG9Eb2MgPSBmdW5jdGlvbiB0b0RvYygpIHtcblx0dmFyIG91dCA9IHtcblx0XHRfX3dlYlN0YXREb2M6IHRydWVcblx0fTtcblx0a2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRvdXRba2V5XSA9IHRoaXMuZGF0YVtrZXldO1xuXHR9LmJpbmQodGhpcykpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5TdGF0cy5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XG5cdGlmKCF0aGlzLmlzRGlyZWN0b3J5KCkpIHRocm93IEVycm9yKCdOb3QgYSBkaXJlY3RvcnknKTtcblxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHJldHVybiBmcy5yZWFkZGlyKHNlbGYuZGF0YS5wYXRoKVxuXHQudGhlbihmdW5jdGlvbiAoYXJyKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKGFyci5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG5cdFx0XHRyZXR1cm4gU3RhdHMuZnJvbVBhdGgoam9pbihzZWxmLmRhdGEucGF0aCwgY2hpbGQpKTtcblx0XHR9KSk7XG5cdH0pXG5cdC50aGVuKGZ1bmN0aW9uIChzdGF0c0FycmF5KSB7XG5cdFx0c2VsZi5jaGlsZHJlbi5zcGxpY2UoMCk7XG5cdFx0c2VsZi5jaGlsZHJlbi5wdXNoLmFwcGx5KHNlbGYuY2hpbGRyZW4sIHN0YXRzQXJyYXkpO1xuXG5cdFx0Ly8gTGV0IHNlcnZlciBrbm93XHRcblx0XHRpZiAoIWlzU2VydmVyKSByZW1vdGVDbWQoJ0NMSUVOVCcsIHtcblx0XHRcdGNtZDogJ3dhdGNoUGF0aCcsXG5cdFx0XHRhcmd1bWVudHM6IFtzZWxmLmRhdGEucGF0aF1cblx0XHR9KTtcblxuXHRcdHNlbGYudXBkYXRlKHNlbGYuZGF0YSk7XG5cblx0XHRyZXR1cm4gc2VsZjsgIFxuXHR9KTtcbn1cblxuU3RhdHMucHJvdG90eXBlLmRlc3Ryb3lGaWxlTGlzdCA9IGZ1bmN0aW9uIChlbCkge1xuXHRlbC5zdGF0cyA9IHVuZGVmaW5lZDtcblx0dGhpcy5maWxlTGlzdHMuZGVsZXRlKGVsKTtcblx0ZWwuaW5uZXJIVE1MID0gJyc7XG59XG5cblN0YXRzLnByb3RvdHlwZS5yZW5kZXJGaWxlTGlzdCA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXG5cdGVsLmZpbGVsaXN0T3B0aW9ucyA9IG9wdGlvbnM7XG5cblx0ZWwuc3RhdHMgPSB0aGlzO1xuXHR0aGlzLmZpbGVMaXN0cy5hZGQoZWwpO1xuXHRlbC5kYXRhc2V0Lm1pbWUgPSB0aGlzLmRhdGEubWltZTtcblx0ZWwuZGF0YXNldC5uYW1lID0gdGhpcy5kYXRhLm5hbWU7XG5cdGVsLmRhdGFzZXQuc2l6ZSA9IHRoaXMuZGF0YS5zaXplO1xuXG5cdHJlbmRlckZpbGVMaXN0KGVsLCB0aGlzLmNoaWxkcmVuLCBvcHRpb25zKTtcbn1cblxuLy8gYWRkIGlzRmlsZSBpc0RpcmVjdG9yeSBldGNcbmZzRnJvbUZuLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRTdGF0cy5wcm90b3R5cGVba2V5XSA9IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMuZGF0YVtcIicgKyBrZXkgKyAnXCJdOycpO1xufSk7XG5cblN0YXRzLmZyb21QYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0cmV0dXJuIGZzLnN0YXQocGF0aCk7XG59XG5cblN0YXRzLmZyb21Eb2MgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRyZXR1cm4gbmV3IFN0YXRzKGRhdGEpO1xufVxuXG5TdGF0cy5mcm9tTm9kZVN0YXRzID0gZnVuY3Rpb24gKHBhdGgsIG5vZGVTdGF0KSB7XG5cblx0dmFyIG91dCA9IHt9O1xuXG5cdGZzRnJvbUZuLmZvckVhY2goa2V5ID0+IG91dFtrZXldID0gbm9kZVN0YXRba2V5XSgpKTtcblx0a2V5cy5mb3JFYWNoKGtleSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBub2RlU3RhdFtrZXldICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBub2RlU3RhdFtrZXldICE9PSAnb2JqZWN0Jykge1xuXHRcdFx0b3V0W2tleV0gPSBub2RlU3RhdFtrZXldO1xuXHRcdH1cblx0fSk7XG5cblx0b3V0LnBhdGggPSBwYXRoUmVzb2x2ZShwYXRoKTtcblxuXHRyZXR1cm4gbmV3IFN0YXRzKG91dCk7XG59XG4iXSwibmFtZXMiOlsia2V5cyIsInJlc29sdmUiLCJkaXJuYW1lIiwiYmFzZW5hbWUiLCJleHRuYW1lIiwiam9pbiIsInBhdGgiLCJwYXRoUmVz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
