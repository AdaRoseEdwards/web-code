'use strict';


	/* eslint-disable */
	var isServer = true;
	

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var path = require('path');
var mime = _interopDefault(require('mime'));

/* global Map, Set, Promise */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

function renderFileList(el, array, options) {

	options = options || {};
	var useOptions = {
		hideDotFiles: (options.hideDotFiles !== undefined ? options.hideDotFiles : true),
		nested: (options.nested !== undefined ? options.nested : true),
		nestingLimit: (options.nestingLimit || 5) - 1,
		sort: options.sort === false ? false : true
	};
	if (options.nestingLimit === 0) return;

	var sortedData = !useOptions.sort ? array : Array.from(array)
		.filter(function (stats) {

			// Whether to hide dotfiles
			if (stats.data.name !== '..' && useOptions.hideDotFiles !== false) {
				return stats.data.name[0] !== '.';
			}
			return true;
		})
		.sort(function (a, b) {
			if (a.name === '..') {
				return -1;
			}
			if (b.name === '..') {
				return 1;
			}
			if (
				(a.isDirectory() === b.isDirectory()) &&
				(a.isFile() === b.isFile())
			) {
				return ([a.data.name, b.data.name].sort(function (a, b) {
					return a.toLowerCase().localeCompare(b.toLowerCase());
				})[0] === a.data.name ? -1 : 1);
			} else {
				if (a.isDirectory()) return -1;
				return 1;
			}
		});

	sortedData.map(function (stats) {

		var li = document.createElement('li');
		li.classList.add('has-icon');
		li.tabIndex = 0;
		li.tabKey = stats;

		if (stats.constructor === Stats) {
			li.dataset.mime = stats.data.mime;
			li.dataset.name = stats.data.name;
			li.dataset.size = stats.data.size;
			li.textContent = stats.data.name;
			li.stats = stats;

			if (stats.isDirectory() && useOptions.nested !== false) {
				var newFileList = document.createElement('ul');
				newFileList.classList.add('filelist');
				li.appendChild(newFileList);
				if (stats.children) {
					stats.renderFileList(newFileList, useOptions);
				}
			}
		} else {
			li.dataset.name = stats.name;
			li.textContent = stats.name;
			if (stats.icon) {
				li.classList.add('has-icon');
				li.dataset.icon = stats.icon;
			}
			if (stats.mime) {
				li.dataset.mime = stats.mime;
			}
		}

		el.appendChild(li);
	});


}

/* global Map, Set, Promise, isServer */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

var promises = new Map();
function remoteCmd(cmd, data) {
	var id = performance.now() + '_' + Math.random();
	return wsPromise.then(function (ws) {
		ws.send(JSON.stringify([
			cmd,
			id,
			data
		]));
		
		if (process.env.DEBUG) {
			var err = new Error();
			var stack = err.stack;
		}

		return new Promise(function (resolve$$1) {
			promises.set(id, resolve$$1);
		}).then(function (data) {
			if (data.error) {
				if (process.env.DEBUG) {
					console.error(data.error, stack);
				}
				throw Error(data.error);
			}
			return data.result;
		});
	});
}

function updateEnv(name) {
	return remoteCmd('GET_ENV', name)
	.then(function (result) {
		if (result) process.env[name] = result;
		return result;
	});
}

	// Connection opened
var wsPromise = new Promise(function (resolve$$1) {

	if (isServer) resolve$$1();

	var isLocal = location.hostname === 'localhost' || location.hostname === '127.0.0.1';
	var ws = new WebSocket((isLocal ? 'ws://' : 'wss://') + location.host);
	ws.binaryType = 'arraybuffer';
	var handshakeResolver;

	ws.addEventListener('message', function m(e) {
		if (typeof e.data === 'string') {
			var result = JSON.parse(e.data);
			var cmd = result[0];
			var promiseResolver = promises.get(result[1]);
			var data = result[2];
			if (promiseResolver) {
				promises.delete(result[1]);
				return promiseResolver(data);
			}
			if (cmd === 'HANDSHAKE') {
				handshakeResolver(data);
			}
			if (cmd === 'FS_CHANGE') {
				console.log('STUB: CHANGE', data);
			}
			if (cmd === 'FS_ADD') {
				Stats.fromPath(path.dirname(data.path)).then(function (stats) {
					stats.updateChildren();
				});
			}
			if (cmd === 'FS_UNLINK') {
				Stats.fromPath(path.dirname(data.path)).then(function (stats) {
					stats.updateChildren();
				});
			}
		}
	});

	ws.addEventListener('open', function firstOpen() {
		ws.removeEventListener('open', firstOpen);
		resolve$$1(ws);
	});

	return new Promise(function (resolve$$1) {
		handshakeResolver = resolve$$1;
	})
	.then(function () {
		return Promise.all([
			updateEnv('HOME'),
			updateEnv('DEBUG'),
		]);
	})
	.then(function () {
		return ws;	
	});
});

/* global Map, Set, Promise, fs, isServer */
/* eslint no-var: 0, no-console: 0 */
/* eslint-env es6 */

// Map to prevent duplicate data objects for each file
var pathToDataMap = new Map();

var fsFromFn = ['isFile', 'isDirectory', 'isBlockDevice', 'isCharacterDevice', 'isSymbolicLink', 'isFIFO', 'isSocket'];
var fsStatic = [
	'dev',
	'mode',
	'nlink',
	'uid',
	'gid',
	'rdev',
	'blksize',
	'ino',
	'size',
	'blocks',
	'atime',
	'mtime',
	'ctime',
	'birthtime',
	'path'
];
var keys = fsStatic.concat(fsFromFn);


/**
 * Special type of singleton which returns the same object for each path.
 */
function Stats (data) {
	if (pathToDataMap.has(data.path)) {
		var existing = pathToDataMap.get(data.path);
		existing.update(data);
		return existing;
	}
	this.fileLists = new Set();
	this.data = {};
	this.update(data);
	pathToDataMap.set(data.path, this);
}

Stats.prototype.update = function update(data) {

	var self = this;

	this.data.name = path.basename(data.path);
	this.data.dirName = path.dirname(data.path);
	this.data.extension = path.extname(data.path).toLowerCase();
	this.data.mime = data.isFile ? mime.lookup(data.path) : 'directory';

	keys.forEach(function (key) {
		this.data[key] = data[key];
	}.bind(this));

	if (this.isDirectory() && !this.children) {
		this.children = [];
		this.childrenPopulated = false;
	}

    // Rerender file lists
	if (this.fileLists.size) {
		Array.from(this.fileLists).forEach(function (filelistEl) {
			filelistEl.innerHTML = '';
			self.renderFileList(filelistEl, filelistEl.filelistOptions);
		});
	}
};

Stats.prototype.toDoc = function toDoc() {
	var out = {
		__webStatDoc: true
	};
	keys.forEach(function (key) {
		out[key] = this.data[key];
	}.bind(this));
	return out;
};

Stats.prototype.updateChildren = function () {
	if(!this.isDirectory()) throw Error('Not a directory');

	var self = this;
	return fs.readdir(self.data.path)
	.then(function (arr) {
		return Promise.all(arr.map(function (child) {
			return Stats.fromPath(path.join(self.data.path, child));
		}));
	})
	.then(function (statsArray) {
		self.children.splice(0);
		self.children.push.apply(self.children, statsArray);

		// Let server know	
		if (!isServer) remoteCmd('CLIENT', {
			cmd: 'watchPath',
			arguments: [self.data.path]
		});

		self.update(self.data);

		return self;  
	});
};

Stats.prototype.destroyFileList = function (el) {
	el.stats = undefined;
	this.fileLists.delete(el);
	el.innerHTML = '';
};

Stats.prototype.renderFileList = function (el, options) {

	el.filelistOptions = options;

	el.stats = this;
	this.fileLists.add(el);
	el.dataset.mime = this.data.mime;
	el.dataset.name = this.data.name;
	el.dataset.size = this.data.size;

	renderFileList(el, this.children, options);
};

// add isFile isDirectory etc
fsFromFn.forEach(function (key) {
	Stats.prototype[key] = new Function('return this.data["' + key + '"];');
});

Stats.fromPath = function (path$$1) {
	return fs.stat(path$$1);
};

Stats.fromDoc = function (data) {
	return new Stats(data);
};

Stats.fromNodeStats = function (path$$1, nodeStat) {

	var out = {};

	fsFromFn.forEach(key => out[key] = nodeStat[key]());
	keys.forEach(key => {
		if (typeof nodeStat[key] !== 'function' && typeof nodeStat[key] !== 'object') {
			out[key] = nodeStat[key];
		}
	});

	out.path = path.resolve(path$$1);

	return new Stats(out);
};

module.exports = Stats;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLWNvZGUtc3RhdHMuY29tcGlsZWQuanMiLCJzb3VyY2VzIjpbIi4uL3N0YXRpYy9zY3JpcHRzL2xpYi9yZW5kZXItZmlsZS1saXN0LmpzIiwiLi4vc3RhdGljL3NjcmlwdHMvbGliL3dzLmpzIiwiLi4vc3RhdGljL3NjcmlwdHMvbGliL3dlYi1jb2RlLXN0YXRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBNYXAsIFNldCwgUHJvbWlzZSAqL1xuLyogZXNsaW50IG5vLXZhcjogMCwgbm8tY29uc29sZTogMCAqL1xuLyogZXNsaW50LWVudiBlczYgKi9cblxuaW1wb3J0IFN0YXRzIGZyb20gJy4vd2ViLWNvZGUtc3RhdHMnO1xuXG5mdW5jdGlvbiByZW5kZXJGaWxlTGlzdChlbCwgYXJyYXksIG9wdGlvbnMpIHtcblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0dmFyIHVzZU9wdGlvbnMgPSB7XG5cdFx0aGlkZURvdEZpbGVzOiAob3B0aW9ucy5oaWRlRG90RmlsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaGlkZURvdEZpbGVzIDogdHJ1ZSksXG5cdFx0bmVzdGVkOiAob3B0aW9ucy5uZXN0ZWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubmVzdGVkIDogdHJ1ZSksXG5cdFx0bmVzdGluZ0xpbWl0OiAob3B0aW9ucy5uZXN0aW5nTGltaXQgfHwgNSkgLSAxLFxuXHRcdHNvcnQ6IG9wdGlvbnMuc29ydCA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWVcblx0fVxuXHRpZiAob3B0aW9ucy5uZXN0aW5nTGltaXQgPT09IDApIHJldHVybjtcblxuXHR2YXIgc29ydGVkRGF0YSA9ICF1c2VPcHRpb25zLnNvcnQgPyBhcnJheSA6IEFycmF5LmZyb20oYXJyYXkpXG5cdFx0LmZpbHRlcihmdW5jdGlvbiAoc3RhdHMpIHtcblxuXHRcdFx0Ly8gV2hldGhlciB0byBoaWRlIGRvdGZpbGVzXG5cdFx0XHRpZiAoc3RhdHMuZGF0YS5uYW1lICE9PSAnLi4nICYmIHVzZU9wdGlvbnMuaGlkZURvdEZpbGVzICE9PSBmYWxzZSkge1xuXHRcdFx0XHRyZXR1cm4gc3RhdHMuZGF0YS5uYW1lWzBdICE9PSAnLic7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9KVxuXHRcdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHRpZiAoYS5uYW1lID09PSAnLi4nKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHRcdGlmIChiLm5hbWUgPT09ICcuLicpIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoXG5cdFx0XHRcdChhLmlzRGlyZWN0b3J5KCkgPT09IGIuaXNEaXJlY3RvcnkoKSkgJiZcblx0XHRcdFx0KGEuaXNGaWxlKCkgPT09IGIuaXNGaWxlKCkpXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIChbYS5kYXRhLm5hbWUsIGIuZGF0YS5uYW1lXS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSk7XG5cdFx0XHRcdH0pWzBdID09PSBhLmRhdGEubmFtZSA/IC0xIDogMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoYS5pc0RpcmVjdG9yeSgpKSByZXR1cm4gLTE7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdHNvcnRlZERhdGEubWFwKGZ1bmN0aW9uIChzdGF0cykge1xuXG5cdFx0dmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblx0XHRsaS5jbGFzc0xpc3QuYWRkKCdoYXMtaWNvbicpO1xuXHRcdGxpLnRhYkluZGV4ID0gMDtcblx0XHRsaS50YWJLZXkgPSBzdGF0cztcblxuXHRcdGlmIChzdGF0cy5jb25zdHJ1Y3RvciA9PT0gU3RhdHMpIHtcblx0XHRcdGxpLmRhdGFzZXQubWltZSA9IHN0YXRzLmRhdGEubWltZTtcblx0XHRcdGxpLmRhdGFzZXQubmFtZSA9IHN0YXRzLmRhdGEubmFtZTtcblx0XHRcdGxpLmRhdGFzZXQuc2l6ZSA9IHN0YXRzLmRhdGEuc2l6ZTtcblx0XHRcdGxpLnRleHRDb250ZW50ID0gc3RhdHMuZGF0YS5uYW1lO1xuXHRcdFx0bGkuc3RhdHMgPSBzdGF0cztcblxuXHRcdFx0aWYgKHN0YXRzLmlzRGlyZWN0b3J5KCkgJiYgdXNlT3B0aW9ucy5uZXN0ZWQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHZhciBuZXdGaWxlTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG5cdFx0XHRcdG5ld0ZpbGVMaXN0LmNsYXNzTGlzdC5hZGQoJ2ZpbGVsaXN0Jyk7XG5cdFx0XHRcdGxpLmFwcGVuZENoaWxkKG5ld0ZpbGVMaXN0KTtcblx0XHRcdFx0aWYgKHN0YXRzLmNoaWxkcmVuKSB7XG5cdFx0XHRcdFx0c3RhdHMucmVuZGVyRmlsZUxpc3QobmV3RmlsZUxpc3QsIHVzZU9wdGlvbnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxpLmRhdGFzZXQubmFtZSA9IHN0YXRzLm5hbWU7XG5cdFx0XHRsaS50ZXh0Q29udGVudCA9IHN0YXRzLm5hbWU7XG5cdFx0XHRpZiAoc3RhdHMuaWNvbikge1xuXHRcdFx0XHRsaS5jbGFzc0xpc3QuYWRkKCdoYXMtaWNvbicpO1xuXHRcdFx0XHRsaS5kYXRhc2V0Lmljb24gPSBzdGF0cy5pY29uO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN0YXRzLm1pbWUpIHtcblx0XHRcdFx0bGkuZGF0YXNldC5taW1lID0gc3RhdHMubWltZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRlbC5hcHBlbmRDaGlsZChsaSk7XG5cdH0pO1xuXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyRmlsZUxpc3Q7IiwiLyogZ2xvYmFsIE1hcCwgU2V0LCBQcm9taXNlLCBpc1NlcnZlciAqL1xuLyogZXNsaW50IG5vLXZhcjogMCwgbm8tY29uc29sZTogMCAqL1xuLyogZXNsaW50LWVudiBlczYgKi9cblxudmFyIHByb21pc2VzID0gbmV3IE1hcCgpO1xuaW1wb3J0IFN0YXRzIGZyb20gJy4vd2ViLWNvZGUtc3RhdHMuanMnO1xuaW1wb3J0IHsgZGlybmFtZSB9IGZyb20gJ3BhdGgnO1xuXG5mdW5jdGlvbiByZW1vdGVDbWQoY21kLCBkYXRhKSB7XG5cdHZhciBpZCA9IHBlcmZvcm1hbmNlLm5vdygpICsgJ18nICsgTWF0aC5yYW5kb20oKTtcblx0cmV0dXJuIHdzUHJvbWlzZS50aGVuKGZ1bmN0aW9uICh3cykge1xuXHRcdHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoW1xuXHRcdFx0Y21kLFxuXHRcdFx0aWQsXG5cdFx0XHRkYXRhXG5cdFx0XSkpO1xuXHRcdFxuXHRcdGlmIChwcm9jZXNzLmVudi5ERUJVRykge1xuXHRcdFx0dmFyIGVyciA9IG5ldyBFcnJvcigpO1xuXHRcdFx0dmFyIHN0YWNrID0gZXJyLnN0YWNrO1xuXHRcdH1cblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdFx0cHJvbWlzZXMuc2V0KGlkLCByZXNvbHZlKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRpZiAoZGF0YS5lcnJvcikge1xuXHRcdFx0XHRpZiAocHJvY2Vzcy5lbnYuREVCVUcpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGRhdGEuZXJyb3IsIHN0YWNrKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aHJvdyBFcnJvcihkYXRhLmVycm9yKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkYXRhLnJlc3VsdDtcblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVudihuYW1lKSB7XG5cdHJldHVybiByZW1vdGVDbWQoJ0dFVF9FTlYnLCBuYW1lKVxuXHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0aWYgKHJlc3VsdCkgcHJvY2Vzcy5lbnZbbmFtZV0gPSByZXN1bHQ7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSk7XG59XG5cblx0Ly8gQ29ubmVjdGlvbiBvcGVuZWRcbnZhciB3c1Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXG5cdGlmIChpc1NlcnZlcikgcmVzb2x2ZSgpO1xuXG5cdHZhciBpc0xvY2FsID0gbG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IGxvY2F0aW9uLmhvc3RuYW1lID09PSAnMTI3LjAuMC4xJztcblx0dmFyIHdzID0gbmV3IFdlYlNvY2tldCgoaXNMb2NhbCA/ICd3czovLycgOiAnd3NzOi8vJykgKyBsb2NhdGlvbi5ob3N0KTtcblx0d3MuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cdHZhciBoYW5kc2hha2VSZXNvbHZlcjtcblxuXHR3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gbShlKSB7XG5cdFx0aWYgKHR5cGVvZiBlLmRhdGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXHRcdFx0dmFyIGNtZCA9IHJlc3VsdFswXTtcblx0XHRcdHZhciBwcm9taXNlUmVzb2x2ZXIgPSBwcm9taXNlcy5nZXQocmVzdWx0WzFdKTtcblx0XHRcdHZhciBkYXRhID0gcmVzdWx0WzJdO1xuXHRcdFx0aWYgKHByb21pc2VSZXNvbHZlcikge1xuXHRcdFx0XHRwcm9taXNlcy5kZWxldGUocmVzdWx0WzFdKTtcblx0XHRcdFx0cmV0dXJuIHByb21pc2VSZXNvbHZlcihkYXRhKTtcblx0XHRcdH1cblx0XHRcdGlmIChjbWQgPT09ICdIQU5EU0hBS0UnKSB7XG5cdFx0XHRcdGhhbmRzaGFrZVJlc29sdmVyKGRhdGEpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNtZCA9PT0gJ0ZTX0NIQU5HRScpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0NIQU5HRScsIGRhdGEpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNtZCA9PT0gJ0ZTX0FERCcpIHtcblx0XHRcdFx0U3RhdHMuZnJvbVBhdGgoZGlybmFtZShkYXRhLnBhdGgpKS50aGVuKGZ1bmN0aW9uIChzdGF0cykge1xuXHRcdFx0XHRcdHN0YXRzLnVwZGF0ZUNoaWxkcmVuKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnQUREJywgZGF0YSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY21kID09PSAnRlNfVU5MSU5LJykge1xuXHRcdFx0XHRTdGF0cy5mcm9tUGF0aChkaXJuYW1lKGRhdGEucGF0aCkpLnRoZW4oZnVuY3Rpb24gKHN0YXRzKSB7XG5cdFx0XHRcdFx0c3RhdHMudXBkYXRlQ2hpbGRyZW4oKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdVTkxJTksnLCBkYXRhKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBmdW5jdGlvbiBmaXJzdE9wZW4oKSB7XG5cdFx0d3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3BlbicsIGZpcnN0T3Blbik7XG5cdFx0cmVzb2x2ZSh3cyk7XG5cdH0pO1xuXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdGhhbmRzaGFrZVJlc29sdmVyID0gcmVzb2x2ZTtcblx0fSlcblx0LnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBQcm9taXNlLmFsbChbXG5cdFx0XHR1cGRhdGVFbnYoJ0hPTUUnKSxcblx0XHRcdHVwZGF0ZUVudignREVCVUcnKSxcblx0XHRdKTtcblx0fSlcblx0LnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB3cztcdFxuXHR9KTtcbn0pO1xuXG5leHBvcnQge1xuXHR3c1Byb21pc2UsXG5cdHJlbW90ZUNtZFxufTsiLCIvKiBnbG9iYWwgTWFwLCBTZXQsIFByb21pc2UsIGZzLCBpc1NlcnZlciAqL1xuLyogZXNsaW50IG5vLXZhcjogMCwgbm8tY29uc29sZTogMCAqL1xuLyogZXNsaW50LWVudiBlczYgKi9cblxuaW1wb3J0IHsgcmVzb2x2ZSBhcyBwYXRoUmVzb2x2ZSwgYmFzZW5hbWUsIGRpcm5hbWUsIGV4dG5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCBtaW1lIGZyb20gJ21pbWUnO1xuaW1wb3J0IHJlbmRlckZpbGVMaXN0IGZyb20gJy4vcmVuZGVyLWZpbGUtbGlzdC5qcyc7XG5pbXBvcnQgeyByZW1vdGVDbWQgfSBmcm9tICcuL3dzLmpzJztcblxuLy8gTWFwIHRvIHByZXZlbnQgZHVwbGljYXRlIGRhdGEgb2JqZWN0cyBmb3IgZWFjaCBmaWxlXG52YXIgcGF0aFRvRGF0YU1hcCA9IG5ldyBNYXAoKTtcblxudmFyIGZzRnJvbUZuID0gWydpc0ZpbGUnLCAnaXNEaXJlY3RvcnknLCAnaXNCbG9ja0RldmljZScsICdpc0NoYXJhY3RlckRldmljZScsICdpc1N5bWJvbGljTGluaycsICdpc0ZJRk8nLCAnaXNTb2NrZXQnXTtcbnZhciBmc1N0YXRpYyA9IFtcblx0J2RldicsXG5cdCdtb2RlJyxcblx0J25saW5rJyxcblx0J3VpZCcsXG5cdCdnaWQnLFxuXHQncmRldicsXG5cdCdibGtzaXplJyxcblx0J2lubycsXG5cdCdzaXplJyxcblx0J2Jsb2NrcycsXG5cdCdhdGltZScsXG5cdCdtdGltZScsXG5cdCdjdGltZScsXG5cdCdiaXJ0aHRpbWUnLFxuXHQncGF0aCdcbl07XG52YXIga2V5cyA9IGZzU3RhdGljLmNvbmNhdChmc0Zyb21Gbik7XG5cblxuLyoqXG4gKiBTcGVjaWFsIHR5cGUgb2Ygc2luZ2xldG9uIHdoaWNoIHJldHVybnMgdGhlIHNhbWUgb2JqZWN0IGZvciBlYWNoIHBhdGguXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN0YXRzIChkYXRhKSB7XG5cdGlmIChwYXRoVG9EYXRhTWFwLmhhcyhkYXRhLnBhdGgpKSB7XG5cdFx0dmFyIGV4aXN0aW5nID0gcGF0aFRvRGF0YU1hcC5nZXQoZGF0YS5wYXRoKTtcblx0XHRleGlzdGluZy51cGRhdGUoZGF0YSk7XG5cdFx0cmV0dXJuIGV4aXN0aW5nO1xuXHR9XG5cdHRoaXMuZmlsZUxpc3RzID0gbmV3IFNldCgpO1xuXHR0aGlzLmRhdGEgPSB7fTtcblx0dGhpcy51cGRhdGUoZGF0YSk7XG5cdHBhdGhUb0RhdGFNYXAuc2V0KGRhdGEucGF0aCwgdGhpcyk7XG59XG5cblN0YXRzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXG5cdHZhciBzZWxmID0gdGhpcztcblxuXHR0aGlzLmRhdGEubmFtZSA9IGJhc2VuYW1lKGRhdGEucGF0aCk7XG5cdHRoaXMuZGF0YS5kaXJOYW1lID0gZGlybmFtZShkYXRhLnBhdGgpO1xuXHR0aGlzLmRhdGEuZXh0ZW5zaW9uID0gZXh0bmFtZShkYXRhLnBhdGgpLnRvTG93ZXJDYXNlKCk7XG5cdHRoaXMuZGF0YS5taW1lID0gZGF0YS5pc0ZpbGUgPyBtaW1lLmxvb2t1cChkYXRhLnBhdGgpIDogJ2RpcmVjdG9yeSc7XG5cblx0a2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHR0aGlzLmRhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0fS5iaW5kKHRoaXMpKTtcblxuXHRpZiAodGhpcy5pc0RpcmVjdG9yeSgpICYmICF0aGlzLmNoaWxkcmVuKSB7XG5cdFx0dGhpcy5jaGlsZHJlbiA9IFtdO1xuXHRcdHRoaXMuY2hpbGRyZW5Qb3B1bGF0ZWQgPSBmYWxzZTtcblx0fVxuXG4gICAgLy8gUmVyZW5kZXIgZmlsZSBsaXN0c1xuXHRpZiAodGhpcy5maWxlTGlzdHMuc2l6ZSkge1xuXHRcdEFycmF5LmZyb20odGhpcy5maWxlTGlzdHMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVsaXN0RWwpIHtcblx0XHRcdGZpbGVsaXN0RWwuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHRzZWxmLnJlbmRlckZpbGVMaXN0KGZpbGVsaXN0RWwsIGZpbGVsaXN0RWwuZmlsZWxpc3RPcHRpb25zKTtcblx0XHR9KTtcblx0fVxufVxuXG5TdGF0cy5wcm90b3R5cGUudG9Eb2MgPSBmdW5jdGlvbiB0b0RvYygpIHtcblx0dmFyIG91dCA9IHtcblx0XHRfX3dlYlN0YXREb2M6IHRydWVcblx0fTtcblx0a2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRvdXRba2V5XSA9IHRoaXMuZGF0YVtrZXldO1xuXHR9LmJpbmQodGhpcykpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5TdGF0cy5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XG5cdGlmKCF0aGlzLmlzRGlyZWN0b3J5KCkpIHRocm93IEVycm9yKCdOb3QgYSBkaXJlY3RvcnknKTtcblxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHJldHVybiBmcy5yZWFkZGlyKHNlbGYuZGF0YS5wYXRoKVxuXHQudGhlbihmdW5jdGlvbiAoYXJyKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKGFyci5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG5cdFx0XHRyZXR1cm4gU3RhdHMuZnJvbVBhdGgoam9pbihzZWxmLmRhdGEucGF0aCwgY2hpbGQpKTtcblx0XHR9KSk7XG5cdH0pXG5cdC50aGVuKGZ1bmN0aW9uIChzdGF0c0FycmF5KSB7XG5cdFx0c2VsZi5jaGlsZHJlbi5zcGxpY2UoMCk7XG5cdFx0c2VsZi5jaGlsZHJlbi5wdXNoLmFwcGx5KHNlbGYuY2hpbGRyZW4sIHN0YXRzQXJyYXkpO1xuXG5cdFx0Ly8gTGV0IHNlcnZlciBrbm93XHRcblx0XHRpZiAoIWlzU2VydmVyKSByZW1vdGVDbWQoJ0NMSUVOVCcsIHtcblx0XHRcdGNtZDogJ3dhdGNoUGF0aCcsXG5cdFx0XHRhcmd1bWVudHM6IFtzZWxmLmRhdGEucGF0aF1cblx0XHR9KTtcblxuXHRcdHNlbGYudXBkYXRlKHNlbGYuZGF0YSk7XG5cblx0XHRyZXR1cm4gc2VsZjsgIFxuXHR9KTtcbn1cblxuU3RhdHMucHJvdG90eXBlLmRlc3Ryb3lGaWxlTGlzdCA9IGZ1bmN0aW9uIChlbCkge1xuXHRlbC5zdGF0cyA9IHVuZGVmaW5lZDtcblx0dGhpcy5maWxlTGlzdHMuZGVsZXRlKGVsKTtcblx0ZWwuaW5uZXJIVE1MID0gJyc7XG59XG5cblN0YXRzLnByb3RvdHlwZS5yZW5kZXJGaWxlTGlzdCA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXG5cdGVsLmZpbGVsaXN0T3B0aW9ucyA9IG9wdGlvbnM7XG5cblx0ZWwuc3RhdHMgPSB0aGlzO1xuXHR0aGlzLmZpbGVMaXN0cy5hZGQoZWwpO1xuXHRlbC5kYXRhc2V0Lm1pbWUgPSB0aGlzLmRhdGEubWltZTtcblx0ZWwuZGF0YXNldC5uYW1lID0gdGhpcy5kYXRhLm5hbWU7XG5cdGVsLmRhdGFzZXQuc2l6ZSA9IHRoaXMuZGF0YS5zaXplO1xuXG5cdHJlbmRlckZpbGVMaXN0KGVsLCB0aGlzLmNoaWxkcmVuLCBvcHRpb25zKTtcbn1cblxuLy8gYWRkIGlzRmlsZSBpc0RpcmVjdG9yeSBldGNcbmZzRnJvbUZuLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRTdGF0cy5wcm90b3R5cGVba2V5XSA9IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMuZGF0YVtcIicgKyBrZXkgKyAnXCJdOycpO1xufSk7XG5cblN0YXRzLmZyb21QYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0cmV0dXJuIGZzLnN0YXQocGF0aCk7XG59XG5cblN0YXRzLmZyb21Eb2MgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRyZXR1cm4gbmV3IFN0YXRzKGRhdGEpO1xufVxuXG5TdGF0cy5mcm9tTm9kZVN0YXRzID0gZnVuY3Rpb24gKHBhdGgsIG5vZGVTdGF0KSB7XG5cblx0dmFyIG91dCA9IHt9O1xuXG5cdGZzRnJvbUZuLmZvckVhY2goa2V5ID0+IG91dFtrZXldID0gbm9kZVN0YXRba2V5XSgpKTtcblx0a2V5cy5mb3JFYWNoKGtleSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBub2RlU3RhdFtrZXldICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBub2RlU3RhdFtrZXldICE9PSAnb2JqZWN0Jykge1xuXHRcdFx0b3V0W2tleV0gPSBub2RlU3RhdFtrZXldO1xuXHRcdH1cblx0fSk7XG5cblx0b3V0LnBhdGggPSBwYXRoUmVzb2x2ZShwYXRoKTtcblxuXHRyZXR1cm4gbmV3IFN0YXRzKG91dCk7XG59XG4iXSwibmFtZXMiOlsicmVzb2x2ZSIsImRpcm5hbWUiLCJiYXNlbmFtZSIsImV4dG5hbWUiLCJqb2luIiwicGF0aCIsInBhdGhSZXNvbHZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBLEFBRUEsU0FBUyxjQUFjLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUU7O0NBRTNDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0NBQ3hCLElBQUksVUFBVSxHQUFHO0VBQ2hCLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxLQUFLLFNBQVMsR0FBRyxPQUFPLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztFQUNoRixNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sS0FBSyxTQUFTLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7RUFDOUQsWUFBWSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQztFQUM3QyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksS0FBSyxLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUk7RUFDM0MsQ0FBQTtDQUNELElBQUksT0FBTyxDQUFDLFlBQVksS0FBSyxDQUFDLEVBQUUsT0FBTzs7Q0FFdkMsSUFBSSxVQUFVLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztHQUMzRCxNQUFNLENBQUMsVUFBVSxLQUFLLEVBQUU7OztHQUd4QixJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksSUFBSSxVQUFVLENBQUMsWUFBWSxLQUFLLEtBQUssRUFBRTtJQUNsRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztJQUNsQztHQUNELE9BQU8sSUFBSSxDQUFDO0dBQ1osQ0FBQztHQUNELElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7R0FDckIsSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksRUFBRTtJQUNwQixPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ1Y7R0FDRCxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFO0lBQ3BCLE9BQU8sQ0FBQyxDQUFDO0lBQ1Q7R0FDRDtJQUNDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUU7S0FDbkMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUMxQjtJQUNELFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7S0FDdkQsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0tBQ3RELENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDaEMsTUFBTTtJQUNOLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDL0IsT0FBTyxDQUFDLENBQUM7SUFDVDtHQUNELENBQUMsQ0FBQzs7Q0FFSixVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsS0FBSyxFQUFFOztFQUUvQixJQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3RDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0VBQzdCLEVBQUUsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0VBQ2hCLEVBQUUsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDOztFQUVsQixJQUFJLEtBQUssQ0FBQyxXQUFXLEtBQUssS0FBSyxFQUFFO0dBQ2hDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0dBQ2xDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0dBQ2xDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0dBQ2xDLEVBQUUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7R0FDakMsRUFBRSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7O0dBRWpCLElBQUksS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFO0lBQ3ZELElBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0MsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdEMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM1QixJQUFJLEtBQUssQ0FBQyxRQUFRLEVBQUU7S0FDbkIsS0FBSyxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7S0FDOUM7SUFDRDtHQUNELE1BQU07R0FDTixFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO0dBQzdCLEVBQUUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztHQUM1QixJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUU7SUFDZixFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM3QixFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQzdCO0dBQ0QsSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFO0lBQ2YsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztJQUM3QjtHQUNEOztFQUVELEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDbkIsQ0FBQyxDQUFDOzs7Q0FHSCxBQUVEOztBQ3RGQTs7OztBQUlBLElBQUksUUFBUSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDekIsQUFDQSxBQUVBLFNBQVMsU0FBUyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7Q0FDN0IsSUFBSSxFQUFFLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7Q0FDakQsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFO0VBQ25DLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztHQUN0QixHQUFHO0dBQ0gsRUFBRTtHQUNGLElBQUk7R0FDSixDQUFDLENBQUMsQ0FBQzs7RUFFSixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFO0dBQ3RCLElBQUksR0FBRyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7R0FDdEIsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztHQUN0Qjs7RUFFRCxPQUFPLElBQUksT0FBTyxDQUFDLFVBQVVBLFVBQU8sRUFBRTtHQUNyQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRUEsVUFBTyxDQUFDLENBQUM7R0FDMUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTtHQUN2QixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7SUFDZixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFO0tBQ3RCLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztLQUNqQztJQUNELE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QjtHQUNELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztHQUNuQixDQUFDLENBQUM7RUFDSCxDQUFDLENBQUM7Q0FDSDs7QUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFJLEVBQUU7Q0FDeEIsT0FBTyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQztFQUNoQyxJQUFJLENBQUMsVUFBVSxNQUFNLEVBQUU7RUFDdkIsSUFBSSxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUM7RUFDdkMsT0FBTyxNQUFNLENBQUM7RUFDZCxDQUFDLENBQUM7Q0FDSDs7O0FBR0QsSUFBSSxTQUFTLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBVUEsVUFBTyxFQUFFOztDQUU5QyxJQUFJLFFBQVEsRUFBRUEsVUFBTyxFQUFFLENBQUM7O0NBRXhCLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxRQUFRLEtBQUssV0FBVyxJQUFJLFFBQVEsQ0FBQyxRQUFRLEtBQUssV0FBVyxDQUFDO0NBQ3JGLElBQUksRUFBRSxHQUFHLElBQUksU0FBUyxDQUFDLENBQUMsT0FBTyxHQUFHLE9BQU8sR0FBRyxRQUFRLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ3ZFLEVBQUUsQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDO0NBQzlCLElBQUksaUJBQWlCLENBQUM7O0NBRXRCLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0VBQzVDLElBQUksT0FBTyxDQUFDLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtHQUMvQixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUNoQyxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDcEIsSUFBSSxlQUFlLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUM5QyxJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDckIsSUFBSSxlQUFlLEVBQUU7SUFDcEIsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzQixPQUFPLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QjtHQUNELElBQUksR0FBRyxLQUFLLFdBQVcsRUFBRTtJQUN4QixpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4QjtHQUNELElBQUksR0FBRyxLQUFLLFdBQVcsRUFBRTtJQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QjtHQUNELElBQUksR0FBRyxLQUFLLFFBQVEsRUFBRTtJQUNyQixLQUFLLENBQUMsUUFBUSxDQUFDQyxZQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsS0FBSyxFQUFFO0tBQ3hELEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztLQUN2QixDQUFDLENBQUM7SUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6QjtHQUNELElBQUksR0FBRyxLQUFLLFdBQVcsRUFBRTtJQUN4QixLQUFLLENBQUMsUUFBUSxDQUFDQSxZQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsS0FBSyxFQUFFO0tBQ3hELEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztLQUN2QixDQUFDLENBQUM7SUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QjtHQUNEO0VBQ0QsQ0FBQyxDQUFDOztDQUVILEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsU0FBUyxTQUFTLEdBQUc7RUFDaEQsRUFBRSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztFQUMxQ0QsVUFBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ1osQ0FBQyxDQUFDOztDQUVILE9BQU8sSUFBSSxPQUFPLENBQUMsVUFBVUEsVUFBTyxFQUFFO0VBQ3JDLGlCQUFpQixHQUFHQSxVQUFPLENBQUM7RUFDNUIsQ0FBQztFQUNELElBQUksQ0FBQyxZQUFZO0VBQ2pCLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQztHQUNsQixTQUFTLENBQUMsTUFBTSxDQUFDO0dBQ2pCLFNBQVMsQ0FBQyxPQUFPLENBQUM7R0FDbEIsQ0FBQyxDQUFDO0VBQ0gsQ0FBQztFQUNELElBQUksQ0FBQyxZQUFZO0VBQ2pCLE9BQU8sRUFBRSxDQUFDO0VBQ1YsQ0FBQyxDQUFDO0NBQ0gsQ0FBQyxDQUFDLEFBRUg7O0FDeEdBOzs7O0FBSUEsQUFDQSxBQUNBLEFBQ0EsQUFFQTtBQUNBLElBQUksYUFBYSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7O0FBRTlCLElBQUksUUFBUSxHQUFHLENBQUMsUUFBUSxFQUFFLGFBQWEsRUFBRSxlQUFlLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3ZILElBQUksUUFBUSxHQUFHO0NBQ2QsS0FBSztDQUNMLE1BQU07Q0FDTixPQUFPO0NBQ1AsS0FBSztDQUNMLEtBQUs7Q0FDTCxNQUFNO0NBQ04sU0FBUztDQUNULEtBQUs7Q0FDTCxNQUFNO0NBQ04sUUFBUTtDQUNSLE9BQU87Q0FDUCxPQUFPO0NBQ1AsT0FBTztDQUNQLFdBQVc7Q0FDWCxNQUFNO0NBQ04sQ0FBQztBQUNGLElBQUksSUFBSSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7OztBQU1yQyxBQUFlLFNBQVMsS0FBSyxFQUFFLElBQUksRUFBRTtDQUNwQyxJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0VBQ2pDLElBQUksUUFBUSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzVDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDdEIsT0FBTyxRQUFRLENBQUM7RUFDaEI7Q0FDRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7Q0FDM0IsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7Q0FDZixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ2xCLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztDQUNuQzs7QUFFRCxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxTQUFTLE1BQU0sQ0FBQyxJQUFJLEVBQUU7O0NBRTlDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQzs7Q0FFaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUdFLGFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEdBQUdELFlBQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUdFLFlBQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Q0FDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUM7O0NBRXBFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUU7RUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDM0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7Q0FFZCxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7RUFDekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7RUFDbkIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztFQUMvQjs7O0NBR0QsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtFQUN4QixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxVQUFVLEVBQUU7R0FDeEQsVUFBVSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7R0FDMUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0dBQzVELENBQUMsQ0FBQztFQUNIO0NBQ0QsQ0FBQTs7QUFFRCxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxTQUFTLEtBQUssR0FBRztDQUN4QyxJQUFJLEdBQUcsR0FBRztFQUNULFlBQVksRUFBRSxJQUFJO0VBQ2xCLENBQUM7Q0FDRixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFO0VBQzNCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzFCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Q0FDZCxPQUFPLEdBQUcsQ0FBQztDQUNYLENBQUE7O0FBRUQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEdBQUcsWUFBWTtDQUM1QyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7O0NBRXZELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztDQUNoQixPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDaEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFO0VBQ3BCLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsS0FBSyxFQUFFO0dBQzNDLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQ0MsU0FBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7R0FDbkQsQ0FBQyxDQUFDLENBQUM7RUFDSixDQUFDO0VBQ0QsSUFBSSxDQUFDLFVBQVUsVUFBVSxFQUFFO0VBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3hCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDOzs7RUFHcEQsSUFBSSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsUUFBUSxFQUFFO0dBQ2xDLEdBQUcsRUFBRSxXQUFXO0dBQ2hCLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0dBQzNCLENBQUMsQ0FBQzs7RUFFSCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7RUFFdkIsT0FBTyxJQUFJLENBQUM7RUFDWixDQUFDLENBQUM7Q0FDSCxDQUFBOztBQUVELEtBQUssQ0FBQyxTQUFTLENBQUMsZUFBZSxHQUFHLFVBQVUsRUFBRSxFQUFFO0NBQy9DLEVBQUUsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO0NBQ3JCLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQzFCLEVBQUUsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0NBQ2xCLENBQUE7O0FBRUQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEdBQUcsVUFBVSxFQUFFLEVBQUUsT0FBTyxFQUFFOztDQUV2RCxFQUFFLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQzs7Q0FFN0IsRUFBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7Q0FDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDdkIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FDakMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FDakMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7O0NBRWpDLGNBQWMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztDQUMzQyxDQUFBOzs7QUFHRCxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFO0NBQy9CLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUMsb0JBQW9CLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDO0NBQ3hFLENBQUMsQ0FBQzs7QUFFSCxLQUFLLENBQUMsUUFBUSxHQUFHLFVBQVVDLE9BQUksRUFBRTtDQUNoQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUNBLE9BQUksQ0FBQyxDQUFDO0NBQ3JCLENBQUE7O0FBRUQsS0FBSyxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQUksRUFBRTtDQUMvQixPQUFPLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ3ZCLENBQUE7O0FBRUQsS0FBSyxDQUFDLGFBQWEsR0FBRyxVQUFVQSxPQUFJLEVBQUUsUUFBUSxFQUFFOztDQUUvQyxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7O0NBRWIsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDcEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUk7RUFDbkIsSUFBSSxPQUFPLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxVQUFVLElBQUksT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssUUFBUSxFQUFFO0dBQzdFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7R0FDekI7RUFDRCxDQUFDLENBQUM7O0NBRUgsR0FBRyxDQUFDLElBQUksR0FBR0MsWUFBVyxDQUFDRCxPQUFJLENBQUMsQ0FBQzs7Q0FFN0IsT0FBTyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUN0QixDQUFBLDs7In0=
